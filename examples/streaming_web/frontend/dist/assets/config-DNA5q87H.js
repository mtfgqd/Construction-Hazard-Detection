import"./modulepreload-polyfill-B5Qt9EMX.js";document.getElementById("config-container");const c=document.getElementById("config-view"),r=document.getElementById("edit-btn"),d=document.getElementById("editor"),l=document.getElementById("config-editor"),u=document.getElementById("save-btn"),g=document.getElementById("cancel-btn"),t=document.getElementById("status");let s=!1,n=!1;function o(e){t.textContent=e?"Loading...":"",t.style.color=e?"blue":""}async function f(){if(!n){o(!0);try{const e=await fetch("/api/config");if(e.ok){const i=await e.json();c.textContent=JSON.stringify(i.config,null,2),l.value=JSON.stringify(i.config,null,2),t.textContent="Configuration loaded successfully!",t.style.color="green",n=!0}else throw new Error("Failed to fetch configuration.")}catch(e){console.error(e),t.textContent="Error fetching configuration.",t.style.color="red",n=!1}finally{o(!1)}}}async function y(){if(s){console.warn("Save operation is already in progress.");return}s=!0,o(!0);try{const e=JSON.parse(l.value);if((await fetch("/api/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:e})})).ok)t.textContent="Configuration updated successfully!",t.style.color="green",n=!1,await f(),a(!1);else throw new Error("Failed to save configuration.")}catch(e){console.error(e),t.textContent="Error saving configuration.",t.style.color="red"}finally{s=!1,o(!1)}}function a(e){e?(d.classList.remove("hidden"),c.classList.add("hidden"),r.classList.add("hidden")):(d.classList.add("hidden"),c.classList.remove("hidden"),r.classList.remove("hidden"))}function m(){r.addEventListener("click",()=>a(!0)),g.addEventListener("click",()=>a(!1)),u.addEventListener("click",y)}function v(){t.textContent="",n=!1}document.addEventListener("DOMContentLoaded",()=>{f(),m(),window.addEventListener("beforeunload",v)});
