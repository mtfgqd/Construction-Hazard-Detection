import"./modulepreload-polyfill-B5Qt9EMX.js";const a=document.getElementById("config-form"),d=document.getElementById("config-view"),n=document.getElementById("edit-btn"),s=document.getElementById("save-btn"),u=document.getElementById("cancel-btn");async function l(){const t=await(await fetch("/api/config")).json();r(t.config),d.textContent=JSON.stringify(t.config,null,2)}function r(e){var t,c,o,i,m;document.getElementById("video-url").value=e.video_url||"",document.getElementById("site").value=e.site||"",document.getElementById("stream-name").value=e.stream_name||"",document.getElementById("model-key").value=e.model_key||"",document.getElementById("line-token-1").value=((t=e.notifications)==null?void 0:t.line_token_1)||"",document.getElementById("line-token-2").value=((c=e.notifications)==null?void 0:c.line_token_2)||"",document.getElementById("detect-vest").checked=((o=e.detection_items)==null?void 0:o.detect_no_safety_vest_or_helmet)||!1,document.getElementById("detect-machinery").checked=((i=e.detection_items)==null?void 0:i.detect_near_machinery_or_vehicle)||!1,document.getElementById("detect-restricted").checked=((m=e.detection_items)==null?void 0:m.detect_in_restricted_area)||!1,document.getElementById("expire-date").value=e.expire_date||""}async function _(){const e={video_url:document.getElementById("video-url").value,site:document.getElementById("site").value,stream_name:document.getElementById("stream-name").value,model_key:document.getElementById("model-key").value,notifications:{line_token_1:document.getElementById("line-token-1").value,line_token_2:document.getElementById("line-token-2").value},detection_items:{detect_no_safety_vest_or_helmet:document.getElementById("detect-vest").checked,detect_near_machinery_or_vehicle:document.getElementById("detect-machinery").checked,detect_in_restricted_area:document.getElementById("detect-restricted").checked},expire_date:document.getElementById("expire-date").value};await fetch("/api/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:e})}),l()}n.addEventListener("click",()=>{a.classList.remove("hidden"),d.classList.add("hidden"),n.classList.add("hidden")});u.addEventListener("click",()=>{a.classList.add("hidden"),d.classList.remove("hidden"),n.classList.remove("hidden")});s.addEventListener("click",_);document.addEventListener("DOMContentLoaded",l);
