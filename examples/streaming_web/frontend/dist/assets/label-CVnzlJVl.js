import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css               */let o;document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("label-title");document.getElementById("camera-grid");const n=document.getElementById("loading-message"),a=new URLSearchParams(window.location.search).get("label");if(!a){console.error("Label parameter is missing in the URL"),window.location.href="index.html";return}t.textContent=a,n.style.display="block",d(a),window.addEventListener("beforeunload",()=>{o&&o.close()})});function d(t){const n=window.location.protocol==="https:"?"wss://":"ws://";o=new WebSocket(`${n}${window.location.host}/api/ws/labels/${encodeURIComponent(t)}`),o.onopen=()=>{console.log("WebSocket connected!"),setInterval(()=>{o.readyState===WebSocket.OPEN&&o.send(JSON.stringify({type:"ping"}))},3e4)},o.onmessage=e=>{const a=JSON.parse(e.data);m(a,t)},o.onerror=e=>{console.error("WebSocket error:",e),window.location.href="index.html"},o.onclose=()=>{console.log("WebSocket closed")}}function m(t,n){const e=document.getElementById("loading-message");t.label===n&&t.images.length>0?(console.log("Received update for current label:",t.label),g(t.images),e.style.display="none"):(console.log("No data for the current label, redirecting to index.html"),window.location.href="index.html")}function g(t){const n=document.getElementById("camera-grid");n.innerHTML="",t.forEach(({key:e,image:a})=>{const i=document.querySelector(`.camera[data-key="${e}"]`);if(i){const l=i.querySelector("img");l.src=`data:image/png;base64,${a}`}else{const l=document.createElement("div");l.className="camera",l.dataset.key=e;const r=document.createElement("h2");r.textContent=e;const c=document.createElement("img");c.src=`data:image/png;base64,${a}`,c.alt=`${e} image`,l.appendChild(r),l.appendChild(c),n.appendChild(l),l.addEventListener("click",()=>{const s=new URLSearchParams(window.location.search).get("label");window.location.href=`/camera.html?label=${encodeURIComponent(s)}&key=${encodeURIComponent(e)}`})}})}
