import{clearToken as i,setToken as c}from"./common-Ceipz8Vt.js";const m="/api";document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("login-form"),t=document.getElementById("login-error");n.addEventListener("submit",async o=>{o.preventDefault();const r=document.getElementById("username").value.trim(),a=document.getElementById("password").value.trim();try{i();const e=await fetch(`${m}/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:a})});if(!e.ok){const d=await e.json();t.textContent=d.detail||"Login failed";return}const s=await e.json();c(s.access_token),window.location.href="./index.html"}catch{t.textContent="Error logging in."}})});
