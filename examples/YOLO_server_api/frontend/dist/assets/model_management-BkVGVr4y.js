import{checkAccess as p,authHeaders as i}from"./common-Ceipz8Vt.js";import"./headerFooterLoader-LYlhFStm.js";const s="/api";document.addEventListener("DOMContentLoaded",()=>{p(["admin","model_manager"]);const c=document.getElementById("model-file-update-form"),n=document.getElementById("model-update-error");c.addEventListener("submit",async a=>{a.preventDefault(),n.textContent="";const m=document.getElementById("model-name").value.trim(),e=document.getElementById("model-file").files[0];if(!e){n.textContent="Please select a model file.";return}const t=new FormData;t.append("model",m),t.append("file",e);try{const o=await fetch(`${s}/model_file_update`,{method:"POST",headers:i(),body:t});if(!o.ok){const u=await o.json();n.textContent=u.detail||"Failed to update model file.";return}alert("Model file updated successfully.")}catch{n.textContent="Error updating model file."}});const f=document.getElementById("get-new-model-form"),d=document.getElementById("get-new-model-error"),l=document.getElementById("model-file-content");f.addEventListener("submit",async a=>{a.preventDefault(),d.textContent="",l.textContent="";const m=document.getElementById("get-model-name").value.trim(),r="1970-01-01";try{const e=await fetch(`${s}/get_new_model`,{method:"POST",headers:{"Content-Type":"application/json",...i()},body:JSON.stringify({model:m,last_update_time:r})});if(!e.ok){const o=await e.json();d.textContent=o.detail||"Failed to retrieve new model.";return}const t=await e.json();t.model_file?l.textContent=`Base64 Model File: ${t.model_file}`:l.textContent=t.message}catch{d.textContent="Error retrieving model file."}})});
