import{checkAccess as r,authHeaders as a}from"./common-Ceipz8Vt.js";import"./headerFooterLoader-CkcITKwD.js";const i="/api";document.addEventListener("DOMContentLoaded",()=>{r(["admin","model_manager"]),m(),u()});function m(){const t=document.getElementById("model-file-update-form"),e=document.getElementById("model-update-error");t&&t.addEventListener("submit",async o=>{o.preventDefault(),e.textContent="";const n=s(e);if(n)try{await c(n,e)}catch{e.textContent="Error updating model file."}})}function s(t){const e=document.getElementById("model-name").value.trim(),n=document.getElementById("model-file").files[0];if(!n)return t.textContent="Please select a model file.",null;const d=new FormData;return d.append("model",e),d.append("file",n),d}async function c(t,e){const o=await fetch(`${i}/model_file_update`,{method:"POST",headers:a(),body:t});if(!o.ok){const n=await o.json();e.textContent=n.detail||"Failed to update model file.";return}alert("Model file updated successfully.")}function u(){const t=document.getElementById("get-new-model-form"),e=document.getElementById("get-new-model-error"),o=document.getElementById("model-file-content");t&&t.addEventListener("submit",async n=>{n.preventDefault(),f(e,o);const d=p();if(d)try{await g(d,e,o)}catch{e.textContent="Error retrieving model file."}})}function f(t,e){t.textContent="",e.textContent=""}function p(){return{model:document.getElementById("get-model-name").value.trim(),last_update_time:"1970-01-01"}}async function g(t,e,o){const n=await fetch(`${i}/get_new_model`,{method:"POST",headers:{"Content-Type":"application/json",...a()},body:JSON.stringify(t)});if(!n.ok){const l=await n.json();e.textContent=l.detail||"Failed to retrieve new model.";return}const d=await n.json();y(d,o)}function y(t,e){t.model_file?e.textContent=`Base64 Model File: ${t.model_file}`:e.textContent=t.message||"No model file available."}
